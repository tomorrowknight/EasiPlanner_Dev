var matrix = {
	limit : 200,
	cache : {},
	table : [],
	// zones:
	// JSON.parse('{"71":"WEST","70":"WEST","73":"NORTH","72":"NORTH","67":"WEST","68":"WEST","77":"CENTRAL","91":"CENTRAL","99":"EAST","28":"CENTRAL","37":"CENTRAL","75":"NORTH","76":"NORTH","78":"CENTRAL","58":"CENTRAL","29":"CENTRAL","57":"CENTRAL","79":"NORTHEAST","56":"CENTRAL","55":"NORTHEAST","35":"CENTRAL","53":"CENTRAL","65":"CENTRAL","54":"NORTHEAST","80":"NORTHEAST","43":"CENTRAL","64":"WEST","66":"CENTRAL","50":"EAST","51":"EAST","52":"EAST","82":"EAST","63":"WEST","62":"WEST","60":"WEST","61":"WEST","59":"CENTRAL","12":"CENTRAL","69":"WEST","38":"CENTRAL","25":"CENTRAL","14":"CENTRAL","16":"CENTRAL","41":"CENTRAL","47":"EAST","45":"EAST","46":"EAST","42":"CENTRAL","81":"EAST","49":"EAST","09":"CENTRAL","48":"EAST","44":"CENTRAL","23":"CENTRAL","27":"CENTRAL","11":"CENTRAL","13":"CENTRAL","15":"CENTRAL","17":"CENTRAL","18":"CENTRAL","10":"CENTRAL","26":"CENTRAL","30":"CENTRAL","22":"CENTRAL","24":"CENTRAL","05":"CENTRAL","08":"CENTRAL","06":"CENTRAL","04":"CENTRAL","90":"CENTRAL","01":"CENTRAL","07":"CENTRAL","03":"CENTRAL","31":"CENTRAL","21":"CENTRAL","20":"CENTRAL","32":"CENTRAL","33":"CENTRAL","19":"CENTRAL","39":"CENTRAL","34":"CENTRAL","36":"CENTRAL","40":"CENTRAL"}')
	// ,
	// factors:JSON.parse('{"8":{"NORTH":{"NORTH":"1.1046494181586575","NORTHEAST":"1.1615110846995342","WEST":"1.2051166809447433","EAST":"1.1540633956879234","CENTRAL":"1.162004009148349"},"NORTHEAST":{"NORTH":"1.1157875618510347","NORTHEAST":"1.1328755763171492","WEST":"1.196051333417264","EAST":"1.1679349542177515","CENTRAL":"1.1785019555757212"},"WEST":{"NORTH":"1.0585256972066734","NORTHEAST":"1.0739262780939887","WEST":"1.117390651255846","EAST":"1.0858910904254442","CENTRAL":"1.0912164501845836"},"EAST":{"NORTH":"1.0729893114351805","NORTHEAST":"1.0909338064177296","WEST":"1.1411640008474573","EAST":"1.0812736909902962","CENTRAL":"1.1187443088602136"},"CENTRAL":{"NORTH":"1.0415808379650116","NORTHEAST":"1.0561500050300776","WEST":"1.087398670365413","EAST":"1.0622344641773789","CENTRAL":"1.042132705450058"}},"15":{"NORTH":{"NORTH":"1.0361840972546594","NORTHEAST":"1.03776696797449","WEST":"1.059819603095884","EAST":"1.0613989149506733","CENTRAL":"1.0818204492330552"},"NORTHEAST":{"NORTH":"1.0370970105015955","NORTHEAST":"1.0334678708443195","WEST":"1.0515236907689147","EAST":"1.0486084561117963","CENTRAL":"1.0620721782362739"},"WEST":{"NORTH":"1.0573383810511534","NORTHEAST":"1.0614412813339122","WEST":"1.058517177382277","EAST":"1.0692370470475268","CENTRAL":"1.0829362640778224"},"EAST":{"NORTH":"1.0748897019695736","NORTHEAST":"1.057399917069845","WEST":"1.0769024388289745","EAST":"1.0497819199156533","CENTRAL":"1.0806666652361552"},"CENTRAL":{"NORTH":"1.0611849081257114","NORTHEAST":"1.0550054321455402","WEST":"1.0644885413348675","EAST":"1.0598596736236854","CENTRAL":"1.0713888239860534"}},"18":{"NORTH":{"NORTH":"1.1540392725138673","NORTHEAST":"1.167786251968272","WEST":"1.1444057017240836","EAST":"1.1979592474666387","CENTRAL":"1.1765841051288273"},"NORTHEAST":{"NORTH":"1.1831316203632296","NORTHEAST":"1.1748871314583629","WEST":"1.166160691616147","EAST":"1.1996210600978645","CENTRAL":"1.174344943290533"},"WEST":{"NORTH":"1.2192261697373528","NORTHEAST":"1.2188332909068396","WEST":"1.1644925954234269","EAST":"1.2247422653951763","CENTRAL":"1.1923133169611295"},"EAST":{"NORTH":"1.2232919884380704","NORTHEAST":"1.19446660926073","WEST":"1.174627286784443","EAST":"1.1537526325924405","CENTRAL":"1.1760573329748931"},"CENTRAL":{"NORTH":"1.1852249212886976","NORTHEAST":"1.1879976874174074","WEST":"1.159653626382351","EAST":"1.1884905086623299","CENTRAL":"1.1498107898235321"}}}'),
	zones : JSON
			.parse('{"01":0,"02":0,"03":0,"04":0,"05":0,"07":1,"08":1,"14":2,"15":2,"16":2,"09":3,"10":3,"11":4,"12":4,"13":4,"17":5,"18":6,"19":6,"20":7,"21":7,"22":8,"23":8,"24":9,"25":9,"26":9,"27":9,"28":10,"29":10,"30":10,"31":11,"32":11,"33":11,"34":12,"35":12,"36":12,"37":12,"38":13,"39":13,"40":13,"41":13,"42":14,"43":14,"44":14,"45":14,"46":15,"47":15,"48":15,"49":16,"50":16,"81":16,"51":17,"52":17,"53":18,"54":18,"55":18,"82":18,"56":19,"57":19,"58":20,"59":20,"60":21,"61":21,"62":21,"63":21,"64":21,"65":22,"66":22,"67":22,"68":22,"69":23,"70":23,"71":23,"72":24,"73":24,"77":25,"78":25,"75":26,"76":26,"79":27,"80":27}'),
	factors : JSON
			.parse('{"8":[["0.973","0.968","1.018","0.995","1.055","0.933","0.936","0.922","0.971","1.019","0.982","0.949","0.993","1.004","1.016","1.044","1.042","1.009","1.001","0.977","1.041","1.120","1.041","1.053","1.034","0.997","0.992","0.950"],["0.971","0.964","1.036","1.008","1.059","0.957","0.965","0.951","1.004","1.051","1.016","0.975","1.022","1.028","1.032","1.058","1.061","1.028","1.021","0.993","1.059","1.133","1.052","1.063","1.039","1.011","1.002","0.967"],["1.042","1.057","1.061","1.051","1.100","1.002","0.983","0.995","1.048","1.041","1.018","1.015","1.048","1.020","1.043","1.067","1.040","1.012","1.034","1.005","1.074","1.162","1.060","1.080","1.050","1.013","1.023","0.988"],["0.989","1.014","1.016","0.990","1.033","0.989","0.967","0.971","0.999","1.044","1.015","0.993","1.022","1.018","1.006","1.028","1.042","1.021","1.010","0.997","1.037","1.102","1.031","1.045","1.021","1.001","1.001","0.982"],["1.068","1.105","1.116","1.083","1.115","1.053","1.039","1.044","1.067","1.138","1.110","1.063","1.084","1.074","1.066","1.083","1.077","1.059","1.067","1.095","1.108","1.125","1.063","1.053","1.051","1.077","1.061","1.044"],["0.986","0.991","1.015","1.018","1.058","0.946","0.915","0.898","0.949","0.983","0.958","0.931","0.987","0.966","0.951","0.992","1.026","0.985","0.995","0.979","0.997","1.110","1.012","1.034","1.022","1.000","0.995","0.949"],["0.979","0.965","1.010","1.001","1.029","0.986","0.962","0.917","0.973","1.006","0.995","0.949","0.975","0.986","0.977","1.026","1.042","0.999","0.986","1.006","1.037","1.094","1.047","1.057","1.040","1.014","1.006","0.966"],["0.947","0.953","0.993","0.983","1.028","0.959","0.938","0.928","0.967","0.995","0.985","0.945","0.982","0.973","0.965","1.009","1.032","0.989","1.001","0.994","1.031","1.090","1.052","1.067","1.041","1.002","0.996","0.949"],["1.018","1.027","1.049","1.026","1.078","0.937","0.920","0.912","0.999","1.011","0.982","0.938","0.987","0.957","0.952","0.994","1.014","0.974","0.987","0.981","1.020","1.127","1.031","1.052","1.026","0.994","0.990","0.941"],["1.083","1.126","1.144","1.121","1.164","1.046","1.038","1.040","1.081","1.062","1.053","1.057","1.078","1.040","1.036","1.076","1.058","1.030","1.052","1.019","1.076","1.154","1.066","1.084","1.043","1.012","1.036","1.008"],["1.043","1.048","1.116","1.112","1.188","1.057","1.041","1.018","1.042","1.074","1.035","1.032","1.063","1.028","1.022","1.065","1.058","1.020","1.043","1.013","1.088","1.157","1.073","1.084","1.051","1.016","1.028","0.992"],["1.021","1.018","1.078","1.038","1.083","1.034","1.020","0.995","1.013","1.125","1.107","1.028","1.051","1.022","1.013","1.064","1.059","1.020","1.046","1.031","0.976","0.976","0.976","1.011","0.967","0.953","0.963","0.939"],["1.055","1.048","1.104","1.048","1.088","1.067","1.064","1.063","1.047","1.149","1.134","1.078","1.069","1.048","1.028","1.076","1.093","1.038","1.044","1.056","0.960","0.959","0.962","0.995","0.953","0.941","0.957","0.936"],["1.039","1.072","1.074","1.074","1.091","1.042","1.024","1.023","1.030","1.084","1.068","1.030","1.031","1.005","0.990","1.056","1.059","1.019","1.021","1.029","0.961","0.967","0.963","0.997","0.959","0.945","0.956","0.940"],["1.029","1.120","1.106","1.096","1.116","1.029","1.037","1.028","1.018","1.084","1.065","1.037","1.037","1.006","0.986","1.047","1.039","1.016","1.028","1.032","0.963","0.976","0.964","0.996","0.960","0.946","0.957","0.941"],["1.087","1.166","1.163","1.140","1.150","1.082","1.115","1.088","1.071","1.125","1.107","1.105","1.121","1.087","1.085","1.048","1.073","1.056","1.067","1.091","0.979","0.983","0.978","1.004","0.973","0.967","0.974","0.968"],["1.141","1.172","1.148","1.144","1.141","1.109","1.127","1.135","1.126","1.145","1.000","1.001","0.992","1.005","0.994","1.010","1.021","0.997","0.995","0.993","0.989","0.989","0.988","1.004","0.981","0.977","0.982","0.979"],["1.176","1.183","1.198","1.157","1.170","1.145","1.160","1.178","1.170","1.200","0.978","0.983","0.979","0.988","0.978","0.987","1.011","1.015","0.985","0.983","0.985","0.984","0.986","1.010","0.987","0.987","0.990","0.991"],["1.105","1.104","1.126","1.090","1.116","1.120","1.130","1.112","1.089","1.159","0.972","0.970","0.974","0.963","0.958","0.975","0.994","1.008","0.986","0.974","0.979","0.976","0.980","1.002","0.971","0.967","0.977","0.978"],["1.091","1.086","1.145","1.102","1.183","1.096","1.095","1.096","1.097","1.167","0.966","0.954","0.962","0.959","0.952","0.963","0.986","0.983","0.972","0.979","0.972","0.976","0.982","1.020","0.978","0.982","0.990","0.967"],["1.162","1.213","1.209","1.179","1.246","1.126","1.075","1.071","1.128","1.153","0.959","0.955","0.956","0.958","0.953","0.960","0.959","0.964","0.956","0.955","0.978","0.972","1.001","1.032","0.973","0.972","0.982","0.953"],["1.105","1.137","1.127","1.097","1.133","1.091","1.075","1.080","1.101","1.109","0.980","0.973","0.974","0.979","0.979","0.982","0.974","0.983","0.976","0.977","0.981","1.002","1.001","1.075","0.995","0.995","0.999","0.981"],["1.135","1.182","1.186","1.152","1.221","1.124","1.099","1.106","1.126","1.153","0.995","0.983","0.982","0.981","0.976","0.980","0.984","0.987","0.981","0.987","1.044","1.007","1.023","1.066","1.003","1.004","1.009","0.994"],["1.132","1.166","1.141","1.123","1.137","1.114","1.088","1.087","1.112","1.085","1.060","1.049","1.044","1.042","1.036","1.033","1.028","1.035","1.030","1.043","1.081","1.128","1.073","1.098","1.052","1.046","1.045","1.039"],["1.228","1.224","1.193","1.171","1.202","1.170","1.157","1.166","1.164","1.140","1.001","0.995","0.998","0.992","0.987","0.993","1.005","1.009","0.999","1.002","1.019","1.012","1.014","1.068","1.007","1.007","1.018","1.001"],["1.195","1.188","1.197","1.154","1.187","1.193","1.193","1.195","1.191","1.161","0.973","0.975","0.980","0.976","0.969","0.981","0.997","1.005","0.977","0.985","1.013","1.005","1.011","1.040","0.986","0.991","1.003","0.974"],["1.219","1.212","1.199","1.160","1.191","1.207","1.186","1.192","1.195","1.159","0.997","0.991","0.994","0.990","0.984","0.993","1.001","1.009","0.993","0.987","1.024","1.018","1.024","1.045","1.015","0.996","1.016","0.996"],["1.214","1.200","1.235","1.154","1.192","1.215","1.218","1.224","1.215","1.251","0.975","0.971","0.976","0.973","0.965","0.979","0.996","1.004","0.971","0.975","0.981","0.982","0.987","1.018","0.974","0.971","0.987","0.981"]],"15":[["1.080","1.055","1.085","1.050","1.065","1.087","1.095","1.091","1.074","1.078","1.054","1.060","1.062","1.042","1.054","1.033","1.044","1.048","1.052","1.070","1.023","1.003","1.017","1.012","1.039","1.054","1.051","1.065"],["1.082","1.026","1.084","1.056","1.063","1.076","1.070","1.085","1.080","1.079","1.059","1.064","1.069","1.058","1.071","1.047","1.065","1.070","1.061","1.072","1.027","1.006","1.018","1.012","1.036","1.057","1.053","1.068"],["1.058","1.084","1.044","1.044","1.059","1.055","1.083","1.099","1.053","1.072","1.070","1.074","1.075","1.079","1.084","1.063","1.064","1.071","1.074","1.068","1.040","1.012","1.029","1.017","1.037","1.054","1.050","1.072"],["1.081","1.113","1.064","1.031","1.055","1.079","1.071","1.080","1.052","1.066","1.055","1.073","1.082","1.101","1.105","1.083","1.090","1.096","1.084","1.065","1.049","1.027","1.037","1.029","1.034","1.065","1.058","1.074"],["1.060","1.084","1.043","1.041","1.018","1.057","1.064","1.085","1.048","1.020","1.043","1.042","1.046","1.061","1.053","1.041","1.055","1.056","1.053","1.062","1.037","0.997","1.015","1.003","1.006","1.011","1.014","1.049"],["1.060","1.068","1.060","1.056","1.064","1.036","1.087","1.075","1.021","1.064","1.062","1.100","1.086","1.073","1.092","1.069","1.058","1.062","1.073","1.088","1.057","1.008","1.041","1.021","1.051","1.067","1.062","1.082"],["1.095","1.088","1.069","1.060","1.064","1.067","1.068","1.093","1.056","1.075","1.111","1.096","1.055","1.058","1.071","1.045","1.051","1.052","1.035","1.079","1.045","1.013","1.032","1.023","1.038","1.068","1.059","1.074"],["1.110","1.116","1.121","1.096","1.100","1.113","1.136","1.090","1.110","1.096","1.113","1.175","1.138","1.092","1.101","1.079","1.077","1.078","1.119","1.120","1.083","1.050","1.066","1.049","1.069","1.105","1.092","1.123"],["1.055","1.070","1.074","1.069","1.074","1.035","1.084","1.084","1.047","1.108","1.082","1.112","1.109","1.106","1.075","1.062","1.084","1.091","1.099","1.101","1.078","1.021","1.062","1.039","1.068","1.082","1.073","1.098"],["1.067","1.113","1.038","1.042","1.026","1.073","1.119","1.129","1.071","1.020","1.063","1.102","1.096","1.117","1.116","1.083","1.082","1.086","1.092","1.071","1.073","1.027","1.056","1.026","1.032","1.053","1.046","1.090"],["1.078","1.082","1.060","1.036","1.026","1.092","1.137","1.148","1.098","1.037","1.028","1.094","1.078","1.105","1.106","1.069","1.072","1.076","1.076","1.059","1.046","1.013","1.023","1.015","1.017","1.051","1.039","1.074"],["1.078","1.082","1.095","1.078","1.073","1.089","1.122","1.136","1.100","1.061","1.045","1.050","1.038","1.071","1.085","1.054","1.046","1.051","1.063","1.067","1.033","1.018","1.030","1.023","1.034","1.051","1.049","1.064"],["1.048","1.059","1.067","1.061","1.059","1.053","1.073","1.103","1.074","1.046","1.013","1.031","1.004","1.045","1.077","1.040","1.036","1.030","1.039","1.034","1.008","1.003","1.008","1.009","1.018","1.022","1.026","1.030"],["1.093","1.080","1.131","1.096","1.088","1.050","1.040","1.109","1.106","1.122","1.106","1.107","1.071","1.081","1.101","1.051","1.057","1.065","1.048","1.109","1.082","1.056","1.073","1.056","1.070","1.101","1.090","1.099"],["1.052","1.077","1.122","1.099","1.095","1.031","1.026","1.071","1.051","1.114","1.125","1.133","1.104","1.130","1.071","1.064","1.060","1.085","1.069","1.126","1.096","1.062","1.085","1.065","1.080","1.113","1.093","1.112"],["1.064","1.073","1.104","1.089","1.087","1.037","1.032","1.063","1.065","1.070","1.075","1.078","1.042","1.045","1.060","1.015","1.019","1.028","1.025","1.050","1.041","1.035","1.037","1.030","1.022","1.016","1.018","1.024"],["1.086","1.062","1.116","1.069","1.073","1.037","1.024","1.087","1.120","1.117","1.070","1.065","1.020","1.027","1.037","1.008","0.997","1.038","1.032","1.016","1.059","1.039","1.040","1.014","1.015","1.012","1.015","1.022"],["1.060","1.057","1.081","1.068","1.066","1.034","1.030","1.076","1.087","1.075","1.069","1.064","1.021","1.051","1.064","1.039","1.035","1.039","1.037","1.025","1.055","1.034","1.044","1.025","1.021","1.018","1.020","1.030"],["1.041","1.045","1.057","1.053","1.053","1.044","1.055","1.080","1.060","1.045","1.040","1.055","1.026","1.056","1.068","1.048","1.034","1.036","1.035","1.041","1.032","1.020","1.032","1.025","1.030","1.034","1.032","1.043"],["1.050","1.051","1.054","1.051","1.035","1.057","1.096","1.140","1.064","1.037","1.036","1.084","1.077","1.095","1.096","1.061","1.025","1.044","1.050","1.034","1.032","1.016","1.021","1.013","1.021","1.022","1.025","1.031"],["1.058","1.112","1.040","1.049","1.009","1.056","1.092","1.116","1.058","1.022","1.087","1.121","1.120","1.132","1.120","1.094","1.097","1.103","1.110","1.128","1.064","1.012","1.042","1.012","1.043","1.054","1.053","1.107"],["1.062","1.112","1.056","1.056","1.026","1.059","1.080","1.095","1.058","1.036","1.024","1.042","1.040","1.058","1.059","1.042","1.049","1.047","1.048","1.046","1.026","0.987","0.998","0.996","0.995","0.997","1.003","1.010"],["1.043","1.092","1.031","1.039","1.002","1.056","1.090","1.111","1.055","1.015","1.052","1.075","1.065","1.085","1.087","1.061","1.042","1.059","1.054","1.064","1.031","1.004","1.020","1.014","1.012","1.015","1.020","1.019"],["1.035","1.074","1.024","1.030","1.002","1.035","1.071","1.084","1.037","1.015","1.022","1.040","1.033","1.053","1.057","1.035","1.011","1.033","1.018","1.023","1.020","0.997","1.006","0.997","1.009","1.008","1.013","1.008"],["1.031","1.034","1.033","1.039","1.010","1.042","1.073","1.097","1.050","1.021","1.028","1.051","1.032","1.067","1.072","1.038","1.014","1.025","1.019","1.019","1.008","0.997","1.006","1.002","1.002","1.015","1.014","1.015"],["1.053","1.045","1.047","1.046","1.026","1.052","1.093","1.133","1.055","1.026","1.028","1.054","1.031","1.079","1.084","1.041","1.018","1.024","1.022","1.011","1.008","1.000","1.007","1.008","1.013","1.007","1.017","1.017"],["1.033","1.033","1.037","1.041","1.021","1.038","1.067","1.099","1.043","1.025","1.021","1.045","1.030","1.068","1.074","1.027","1.018","1.025","1.023","1.021","1.003","0.997","1.002","1.005","1.007","1.021","1.001","1.013"],["1.048","1.051","1.061","1.057","1.056","1.054","1.093","1.142","1.062","1.050","1.046","1.082","1.058","1.099","1.101","1.054","1.028","1.036","1.037","1.014","1.033","1.014","1.012","1.011","1.015","1.006","1.018","1.026"]],"18":[["1.136","1.146","1.121","1.088","1.136","1.116","1.121","1.137","1.122","1.142","1.160","1.173","1.124","1.193","1.181","1.191","1.161","1.161","1.170","1.164","1.181","1.130","1.197","1.124","1.194","1.174","1.165","1.154"],["1.136","1.091","1.107","1.074","1.129","1.115","1.120","1.135","1.127","1.153","1.168","1.170","1.139","1.229","1.233","1.239","1.214","1.225","1.181","1.151","1.185","1.131","1.207","1.123","1.187","1.155","1.154","1.152"],["1.175","1.174","1.106","1.103","1.149","1.150","1.139","1.159","1.132","1.145","1.176","1.212","1.167","1.233","1.239","1.237","1.213","1.194","1.195","1.187","1.199","1.139","1.223","1.133","1.245","1.175","1.179","1.185"],["1.135","1.137","1.128","1.023","1.113","1.128","1.131","1.134","1.114","1.180","1.179","1.156","1.128","1.242","1.229","1.236","1.217","1.234","1.170","1.158","1.195","1.136","1.192","1.131","1.203","1.160","1.156","1.152"],["1.250","1.208","1.262","1.136","1.097","1.239","1.199","1.255","1.244","1.213","1.265","1.298","1.256","1.281","1.262","1.264","1.247","1.254","1.267","1.303","1.228","1.136","1.209","1.145","1.254","1.262","1.260","1.290"],["1.113","1.113","1.090","1.074","1.135","1.055","1.093","1.129","1.073","1.115","1.130","1.157","1.098","1.183","1.127","1.158","1.177","1.187","1.153","1.125","1.138","1.120","1.187","1.118","1.167","1.143","1.143","1.137"],["1.182","1.146","1.116","1.030","1.091","1.143","1.048","1.123","1.141","1.151","1.170","1.187","1.183","1.192","1.115","1.148","1.166","1.207","1.219","1.218","1.180","1.131","1.222","1.146","1.231","1.209","1.191","1.213"],["1.153","1.152","1.156","1.083","1.150","1.117","1.059","1.068","1.141","1.128","1.136","1.209","1.213","1.216","1.122","1.154","1.208","1.190","1.225","1.187","1.150","1.132","1.218","1.149","1.205","1.176","1.166","1.174"],["1.100","1.110","1.106","1.076","1.138","1.072","1.100","1.116","1.076","1.138","1.153","1.167","1.101","1.195","1.153","1.156","1.191","1.148","1.155","1.167","1.172","1.131","1.242","1.149","1.199","1.155","1.151","1.151"],["1.113","1.126","1.096","1.101","1.120","1.102","1.127","1.142","1.101","1.065","1.140","1.236","1.235","1.326","1.276","1.266","1.276","1.252","1.249","1.183","1.143","1.108","1.176","1.110","1.223","1.164","1.199","1.230"],["1.128","1.120","1.098","1.089","1.106","1.104","1.095","1.106","1.096","1.069","1.051","1.199","1.202","1.298","1.221","1.218","1.255","1.221","1.220","1.158","1.136","1.101","1.175","1.104","1.213","1.156","1.180","1.206"],["1.171","1.166","1.171","1.109","1.156","1.143","1.135","1.161","1.192","1.183","1.233","1.164","1.199","1.257","1.219","1.221","1.223","1.196","1.208","1.186","1.200","1.131","1.205","1.131","1.228","1.200","1.196","1.233"],["1.123","1.129","1.148","1.095","1.149","1.108","1.120","1.172","1.156","1.161","1.184","1.158","1.077","1.150","1.139","1.179","1.177","1.178","1.164","1.165","1.188","1.129","1.192","1.125","1.208","1.185","1.174","1.185"],["1.132","1.143","1.235","1.112","1.157","1.089","1.110","1.200","1.234","1.305","1.376","1.308","1.195","1.085","1.086","1.121","1.150","1.174","1.222","1.318","1.307","1.191","1.302","1.214","1.308","1.308","1.267","1.287"],["1.118","1.118","1.151","1.083","1.126","1.084","1.073","1.130","1.156","1.231","1.287","1.228","1.140","1.073","1.057","1.097","1.102","1.128","1.187","1.264","1.245","1.154","1.252","1.182","1.266","1.255","1.229","1.232"],["1.177","1.153","1.177","1.101","1.143","1.135","1.110","1.177","1.208","1.242","1.281","1.284","1.212","1.108","1.088","1.056","1.103","1.122","1.198","1.302","1.256","1.164","1.266","1.159","1.194","1.177","1.174","1.192"],["1.183","1.170","1.215","1.114","1.153","1.150","1.133","1.210","1.268","1.297","1.352","1.306","1.212","1.165","1.141","1.147","1.031","1.155","1.212","1.204","1.296","1.146","1.199","1.125","1.213","1.196","1.185","1.207"],["1.166","1.144","1.183","1.101","1.149","1.133","1.131","1.206","1.218","1.223","1.254","1.239","1.179","1.141","1.120","1.106","1.082","1.076","1.192","1.216","1.230","1.147","1.214","1.130","1.194","1.171","1.164","1.181"],["1.119","1.108","1.129","1.081","1.130","1.117","1.122","1.145","1.139","1.139","1.150","1.129","1.103","1.154","1.147","1.139","1.079","1.098","1.083","1.129","1.161","1.115","1.153","1.075","1.143","1.110","1.115","1.108"],["1.134","1.125","1.102","1.099","1.089","1.132","1.153","1.166","1.136","1.092","1.083","1.144","1.146","1.232","1.210","1.169","1.077","1.105","1.154","1.058","1.148","1.090","1.141","1.068","1.140","1.075","1.113","1.114"],["1.248","1.231","1.207","1.188","1.102","1.199","1.136","1.143","1.154","1.110","1.134","1.360","1.369","1.443","1.382","1.365","1.384","1.362","1.377","1.362","1.063","1.062","1.113","1.062","1.184","1.246","1.214","1.359"],["1.293","1.276","1.287","1.237","1.160","1.281","1.293","1.323","1.311","1.240","1.283","1.375","1.372","1.406","1.333","1.347","1.285","1.310","1.379","1.367","1.200","1.053","1.183","1.082","1.283","1.310","1.285","1.346"],["1.261","1.235","1.215","1.200","1.109","1.243","1.222","1.255","1.236","1.156","1.202","1.409","1.415","1.466","1.421","1.357","1.243","1.308","1.370","1.379","1.097","1.061","1.100","1.069","1.200","1.240","1.207","1.323"],["1.220","1.204","1.202","1.175","1.102","1.216","1.286","1.312","1.272","1.188","1.235","1.345","1.327","1.409","1.347","1.262","1.203","1.231","1.273","1.290","1.130","1.029","1.102","0.998","1.172","1.233","1.209","1.267"],["1.211","1.201","1.178","1.160","1.072","1.211","1.244","1.254","1.244","1.136","1.184","1.290","1.248","1.317","1.309","1.171","1.162","1.177","1.227","1.226","1.065","1.042","1.088","1.028","1.085","1.212","1.140","1.221"],["1.126","1.123","1.108","1.103","1.106","1.126","1.144","1.155","1.138","1.095","1.096","1.152","1.140","1.214","1.193","1.081","1.058","1.063","1.125","1.078","1.085","1.049","1.085","1.040","1.146","1.047","1.102","1.092"],["1.173","1.165","1.166","1.146","1.090","1.174","1.190","1.201","1.188","1.150","1.175","1.196","1.186","1.250","1.236","1.139","1.125","1.141","1.183","1.186","1.086","1.062","1.103","1.057","1.090","1.232","1.066","1.161"],["1.127","1.118","1.135","1.104","1.138","1.125","1.146","1.162","1.143","1.149","1.189","1.152","1.133","1.187","1.173","1.083","1.062","1.068","1.108","1.118","1.151","1.061","1.109","1.055","1.144","1.096","1.108","1.052"]]}'),
	load : function(depot, parcels, callback) {
		if (parcels.length > this.limit) {
			callback();
			return;
		}

		if (this.cache[parcels.length] != undefined) {
			this.table = this.cache[parcels.length];
			callback();
			return;
		}
		for (var i = 0; i < parcels.length; i++) {
			parcels.at(i).set("i", i + 1);
		}
		var locs = parcels.map(function(parcel) {
			return "loc=" + parcel.get("lat") + "," + parcel.get("lng");
		});
		locs.unshift("loc=" + depot.get("lat") + "," + depot.get("lng"))

		var thisUrl = "http://dev.logistics.lol:5000/table?" + locs.join("&");
		console.log(thisUrl);
		var self = this;
		$.ajax({
			url : thisUrl,
			success : function(resp) {
				self.table = resp.distance_table;
				self.cache[parcels.length] = resp.distance_table;
				callback();
			},
			dataType : "json",
		});
	},
	travelTime : function(parcel1, parcel2, hour) {
		// var zoneFrom = this.zones[parcel1.get("postal").substr(0,2)];
		// var zoneEnd = this.zones[parcel2.get("postal").substr(0,2)];
		// var mappedHour = this.mapHour(hour);
		// var factor = this.factors[mappedHour][zoneFrom][zoneEnd];
		// if(/nofactor/.test(location.hash)) factor = 1;
		factor = 1;
		if (parcels.length > this.limit) {
			return parcel1.distance(parcel2) / 800 * factor;
		} else {
			return Math
					.round(this.table[parcel1.get("i")][parcel2.get("i")] / 600)
					/ speedFactor * factor;
		}
	},
	mapHour : function(hour) {
		if (hour >= 7 && hour <= 9) {
			return "8";
		}
		if (hour >= 17 && hour <= 19) {
			return "18";
		}
		return "15";
	}
}
